generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int            @id @default(autoincrement())
  username     String         @unique
  senha        String
  perfil       Perfil         @default(CLIENTE)
  AnexarTreino AnexarTreino[]
}

model Treinadores {
  id                    Int        @id @default(autoincrement())
  perfil                Perfil     @default(TREINADOR)
  nome_treinador        String
  cpf_treinador         String     @unique
  data_nascimento       String
  salario_treinador     Int
  treinador_endereco_id Int?       @unique
  endereco_treinador    Enderecos? @relation(fields: [treinador_endereco_id], references: [id])
  treinos               Treinos[]
}

model Clientes {
  id               Int       @id @default(autoincrement())
  perfil           Perfil    @default(CLIENTE)
  cliente_id       Int       @unique
  nome             String
  sobrenome        String
  cpf_cliente      String    @unique
  data_nascimento  String
  numero_telefone  String
  endereco_cliente Enderecos @relation(fields: [cliente_id], references: [id], map: "fk_client_id")
  treinos          Treinos[]
}

model Treinos {
  id                    Int          @id @default(autoincrement())
  treino_id             Int          @unique
  tipo_treino           String       @unique
  descricao_treino      String
  quantidade_series     String
  quantidade_repeticoes String
  dia_da_semana         String
  treinador_id          Treinadores? @relation(fields: [treino_id], references: [id], map: "fk_treinador_id")
  client_id             Clientes?    @relation(fields: [treino_id], references: [id], map: "fk_client_id")
}

model AnexarTreino {
  id        Int  @id @default(autoincrement())
  id_treino Int
  id_user   User @relation(fields: [userId], references: [id])
  userId    Int
}

model Enderecos {
  id           Int          @id @default(autoincrement())
  endereco_id  Int?         @unique
  estado       String
  cidade       String
  bairro       String
  rua          String
  numero       Int
  treinador_id Treinadores?
  cliente_id   Clientes?
}

enum Perfil {
  ADMIN
  TREINADOR
  CLIENTE
}
